while(i < 30){
a<-a*1.1
i<-i+1
}
a
breach <- read.csv('breachmeans.csv')
setwd("/Volumes/triddle/Teaching/Grad stats sem")
getwd()
setwd('~')
getwd()
breach <- read.csv('breachmeans.csv')
setwd("/Volumes/triddle/Teaching/Grad stats sem")
breach <- read.csv('breachmeans.csv')
names(breach)
summary(breach)
head(breach)
breach$happy <- rep(c('yes', 'no'), each=10)
summary(breach)
head(breach)
breach$happy<-factor(breach$happy)
summary(breach)
str(breach)
?str
table(subj)
table(breach$subj)
hist(locomotion1)
hist(breach$locomotion1)
hist(breach$locomotion2)
hist(breach$difflocomotion)
?data.frame
type(breach$subj)
str(breach$subj)
?factor
?char
?character
head(breach)
?numeric
breach$happy <- rep(c("yes", "no") each=10)
breach$happy <- rep(c("yes", "no"), each=10)
head(breach)
str(breach$happy)
breach$happy <- as.factor(breach$happy)
str(breach$happy)
breach$happy
summary(breach$happy)
breach$happy <- rep(c("yes", "no"), each=10)
breach$happy #there's only 20 observations, so we can just print out all of them.
str(breach$happy)
summary(breach$happy)
breach$happy <- as.factor(breach$happy)
breach$happy #there's only twenty observations, so we can just print out the whole lot of them
summary(breach$happy)
library(ggplot2)
plot <- ggplot(breach, aes(x=locomotion1))
plot + geom_histogram()
plot <- ggplot(breach, aes(x=locomotion2))
plot + geom_histogram()
plot <- ggplot(breach, aes(x=locomotion))
plot
print(plot)
plot + geom_line()
plot <- ggplot(breach, aes(x=locomotion1))
plot + geom_line()
plot + geom_point()
plot + geom_area()
plot + geom_bin2d()
plot + geom_dotplot()
plot + geom_freqpoly()
plot + geom_quantile()
plot + geom_rug()
plot + geom_density()
plot <- ggplot(breach, aes(x=c(locomotion1, locomotion2)))
plot + geom_density()
?c
install.packages("reshape2")
install.packages("reshape2")
install.packages("reshape2")
install.packages("reshape2")
plot <- ggplot(breach, aes(x=c(locomotion1, locomotion2)))
library(ggplot2)
plot <- ggplot(breach, aes(x=c(locomotion1, locomotion2)))
plot + geom_histogram()
plot <- ggplot(breach, aes(x=c(locomotion1, locomotion2)))
plot + geom_histogram()
```{r, warning=FALSE, message=FALSEd}
plot <- ggplot(breach, aes(x=c(locomotion1, locomotion2)))
plot + geom_histogram()
```
plot <- ggplot(breach, aes(x=c(locomotion1, locomotion2)))
plot + geom_histogram()
?melt
library(reshape2)
?melt
names(breach)
breach$locomotion1 - breach$locomotion2
difflocomotion
breach$difflocomotion
melt(breach,
id.vars = c('subj', 'flourishing', 'swls', 'age', 'exp', 'apride',
'lpride', 'eom', 'rankindiv', 'rank21', 'averank'),
measure.vars = c('locomotion1', 'locomotion2', 'assessment1', 'assessment2',
'promotion1', 'promotion2', 'prevention1', 'prevention2',
'stress1', 'stress2', 'lie2', 'lie1', 'LxA1', 'LxA2', ))
melt(breach,
id.vars = c('subj', 'flourishing', 'swls', 'age', 'exp', 'apride',
'lpride', 'eom', 'rankindiv', 'rank21', 'averank'),
measure.vars = c('locomotion1', 'locomotion2', 'assessment1', 'assessment2',
'promotion1', 'promotion2', 'prevention1', 'prevention2',
'stress1', 'stress2', 'lie2', 'lie1', 'LxA1', 'LxA2'))
breach <- melt(breach,
id.vars = c('subj', 'flourishing', 'swls', 'age', 'exp', 'apride',
'lpride', 'eom', 'rankindiv', 'rank21', 'averank'),
measure.vars = c('locomotion1', 'locomotion2', 'assessment1', 'assessment2',
'promotion1', 'promotion2', 'prevention1', 'prevention2',
'stress1', 'stress2', 'lie2', 'lie1', 'LxA1', 'LxA2'))
str(breach)
summary(breach)
280/20
breach[breach$subject == 2]
breach[breach$subj == 2]
breach[breach$subj == 2,]
625*2
*2
1250*2
2500-1474
1507-625
882-100
acct.balance <- 782
to.be.reimbursed <- 90+167+188+170
994-615
remaining.cc.balance <- 994-to.be.reimbursed
acct.balance-400
install.packages('XML')
install.packages('tm')
library(XML)
library(tm)
?
d
update
?sd
sd(1:2)
1:2
.5^2
sum(.25, .25)
1+2
/2
3/2
1-.5
2-.5
1-1.5
2-1.5
.5*.5
sqrt(.25)
sqrt(.5)
?samp
?sample
library(Lahman)
df.bat <- with(Batting, data.frame(playerID=playerID,
teamID=teamID,
yearID=yearID,
R=R
))
library(ggplot2)
library(plyr)
library(Lahman)
df.mast <- with(Master, data.frame(playerID=playerID, birth=birthYear))
df<-join(Batting, df.mast)
df$age <- df$yearID - df$birth
ggplot(df, aes(x=age, y=stint)) +
stat_summary(fun.y=mean, geom='line', color='#144256', size=1.5) +
theme_bw() + xlab('Age') + ylab('Teams Played for')
head(mast)
head(df.mast)
head(df)
df <- subset(df, df$G>=145)
ggplot(df, aes(x=R)) +
geom_histogram(binwidth=1, fill="#144256") +
ylab('Count') + xlab('Runs') +
theme_bw()
str(df$yearID)
ggplot(df, aes(y=R, x=yearID)) +
geom_point(alpha=.5, color="#144256") +
stat_smooth(method=lm, color=''#88301B')
ylab('Runs') + xlab('Year') +
theme_bw()
ggplot(df, aes(y=R, x=yearID)) +
geom_point(alpha=.5, color="#144256") +
stat_smooth(method=lm, color=''#88301B') +
ylab('Runs') + xlab('Year') +
theme_bw()
ggplot(df, aes(y=R, x=yearID)) +
geom_point(alpha=.5, color="#144256") +
stat_smooth(method=lm, color=''#88301B') +
ylab('Runs') + xlab('Year') +
ggplot(df, aes(y=R, x=yearID)) +
geom_point(alpha=.5, color="#144256") +
stat_smooth(method=lm, color='#88301B') +
ylab('Runs') + xlab('Year') +
theme_bw()
ggplot(df, aes(y=R, x=yearID)) +
geom_point(alpha=.5, color="#144256") +
ylab('Runs') + xlab('Year') +
theme_bw()
ggplot(df, aes(y=R, x=yearID)) +
geom_point(alpha=.5, color="#144256") +
stat_smooth(method='loess', color = '#88301B')
ylab('Runs') + xlab('Year') +
theme_bw()
ggplot(df, aes(y=R, x=yearID)) +
geom_point(alpha=.5, color="#144256") +
stat_smooth(method='loess', color = '#88301B') +
ylab('Runs') + xlab('Year') +
theme_bw()
head(df)
ggplot(df, aes(y=R, x=age)) +
geom_point(alpha=.5, color="#144256") +
stat_smooth(method='loess', color = '#88301B') +
ylab('Runs') + xlab('Year') +
theme_bw()
grep('gwynn*+', df$playerID)
grep('gwynn.+', df$playerID)
df[2351:2356,]
df[2351:2357,]
df[2350:2357,]
ggplot(df, aes(y=R, x=age)) +
geom_point(alpha=.5, color="#144256") +
stat_smooth(method='loess', color='#88301B') +
geom_line(df[2351:3256], color='#88691B')
ylab('Runs') + xlab('Year') +
theme_bw()
ggplot(df, aes(y=R, x=age)) +
geom_point(alpha=.5, color="#144256") +
stat_smooth(method='loess', color='#88301B') +
geom_line(df[2351:3256,], color='#88691B')
ylab('Runs') + xlab('Year') +
theme_bw()
ggplot(df, aes(y=R, x=age)) +
geom_point(alpha=.5, color="#144256") +
stat_smooth(method='loess', color='#88301B') +
geom_line(df[2351:3256,], aes(y=R, x=age), color='#88691B')
ylab('Runs') + xlab('Year') +
theme_bw()
ggplot(df, aes(y=R, x=age)) +
geom_point(alpha=.5, color="#144256") +
stat_smooth(method='loess', color='#88301B') +
geom_line(df[2351:2356,], aes(y=R, x=age), color='#88691B')
ylab('Runs') + xlab('Year') +
theme_bw()
ggplot(df, aes(y=R, x=age)) +
geom_point(alpha=.5, color="#144256") +
stat_smooth(method='loess', color='#88301B') +
geom_line(df[2351:2356,], aes(y=R, x=age), color='#88691B')
ggplot(df, aes(y=R, x=age)) +
geom_point(alpha=.5, color="#144256") +
stat_smooth(method='loess', color='#88301B') +
geom_line(df[2351:2356,], aes(y=R, x=age), color='#88691B') +
ylab('Runs') + xlab('Year') +
theme_bw()
ggplot(df, aes(y=R, x=age)) +
geom_point(alpha=.5, color="#144256") +
stat_smooth(method='loess', color='#88301B') +
geom_line(df[which(grep('gwynn.+', df$playerID),], aes(y=R, x=age),
color='#88691B') +
ylab('Runs') + xlab('Year') +
theme_bw()
ggplot(df, aes(y=R, x=age)) +
geom_point(alpha=.5, color="#144256") +
stat_smooth(method='loess', color='#88301B') +
geom_line(df[which(grep('gwynn.+', df$playerID)),], aes(y=R, x=age),
color='#88691B') +
ylab('Runs') + xlab('Year') +
theme_bw()
?grep
ggplot(df, aes(y=R, x=age)) +
geom_point(alpha=.5, color="#144256") +
stat_smooth(method='loess', color='#88301B') +
geom_line(df[which(grepl('gwynn.+', df$playerID)),], aes(y=R, x=age),
color='#88691B') +
ylab('Runs') + xlab('Year') +
theme_bw()
ggplot(df, aes(y=R, x=age)) +
geom_point(alpha=.5, color="#144256") +
stat_smooth(method='loess', color='#88301B') +
geom_line(data=df[which(grepl('gwynn.+', df$playerID)),], aes(y=R, x=age),
color='#88691B') +
ylab('Runs') + xlab('Year') +
theme_bw()
grep('henderson.+', df$playerID)
grep('henders.+', df$playerID)
grep('hende.+', df$playerID)
df[2499,]
grep('hender.+', df$playerID)
df[2504,]
df[2504:2509,]
6+8+9
6+7+9+6
grep('gwynn.+, df$playerID)
sdf
''
)
sdfl;
sa
'
grep('gwynn.+', df$playerID)
df[2351:2356,]
df[which(grepl('gwynn.+', df$playerID)),]
df$BA <- df$H/df$AB
df$OBP <- (df$H + df$BB + df$HBP)/(df$AB + df$BB + df$HBP + df$SF)
df$SLG <- (df$H-(df$X2B+df$X3B+df$HR) + (2*df$X2B) + (3*df$x3B) + (4*df$HR))/df$AB
df$X2B+df$X3B+df$HR
df$H-(df$X2B+df$X3B+df$HR)
head(df)
df$SLG <- (df$H-(df$X2B+df$X3B+df$HR) + (2*df$X2B) + (3*df$x3B) + (4*df$HR))/df$AB
df$SLG <- (df$H-(df$X2B+df$X3B+df$HR) + (2*df$X2B) + (3*df$X3B) + (4*df$HR))/df$AB
df[which(grepl('gwynn.+', df$playerID)),]
df$RPG <- df$R/df$G
head(df)
ggplot(df, aes(y=RPG, x=age)) +
geom_point(alpha=.5, color="#144256") +
stat_smooth(method='loess', color = '#88301B') +
ylab('Runs') + xlab('Year') +
theme_bw()
df<-join(Batting, df.mast)
df$age <- df$yearID - df$birth
df$BA <- df$H/df$AB
df$OBP <- (df$H + df$BB + df$HBP)/(df$AB + df$BB + df$HBP + df$SF)
df$SLG <- (df$H-(df$X2B+df$X3B+df$HR) + (2*df$X2B) + (3*df$X3B) + (4*df$HR))/df$AB
df$RPG <- df$R/df$G
ggplot(df, aes(y=RPG, x=age)) +
geom_point(alpha=.5, color="#144256") +
stat_smooth(method='loess', color = '#88301B') +
ylab('Runs') + xlab('Year') +
theme_bw()
5/35
1128.38+95
-650
1123.38-650
478.38+1272.53
610+442
menus<-readLines('../Data/menustat-546cf6b433804.csv')
menus<-menus[-1]
menus<-gsub('\t-', '', menus)
menus<-gsub('\t', '', menus)
menus<-read.csv(textConnection(menus)) #this takes a minute...
submenus<-menus[,3:51] #leave 'Restuarant', 'Food Category', and 'Menu Item ID' untouched.
submenus[]<-lapply(submenus, as.character)
menus[,3:51]<-submenus
submenus<-menus[,c(7:15, 19:51)]
submenus[]<-lapply(submenus, as.numeric)
menus[,c(7:15, 19:51)]<-submenus
library(reshape2)
library(stringr)
library(plyr)
df <- melt(menus, id.vars = c('Restaurant.', 'Food.Category.', 'Item_Name.',
'Menu_Item_ID'))
df$year <- df$variable
levels(df$year) <- str_match(levels(df$variable), "[0-9]{4}")
levels(df$variable) <- gsub('\\.{1,2}', '', levels(df$variable))#remove dots
levels(df$variable) <- gsub('[0-9]', '', levels(df$variable))#remove year
levels(df$variable) <- gsub('\\s+$', '', levels(df$variable))#remove trailing space
df<-dcast(df, Restaurant. + Food.Category. + Item_Name. + Menu_Item_ID + year ~
variable , value.var = 'value')
df<-arrange(df, Restaurant., Item_Name.)
df$Carbohydratesg[131161] <- NA
df[75620, 16] <- 300
df[75620, 21] <- 3
df[75815, 16] <- 250
df[75815, 21] <- 3
df[122305,12] <- NA
df[122305,11] <- NA
df$Calories <- as.numeric(df$Calories)
df$Proteing <- as.numeric(df$Proteing)
df$TotalFatg <- as.numeric(df$TotalFatg)
df$Carbohydratesg <- as.numeric(df$Carbohydratesg)
library(lme4)
names(df)[1] <- 'Restaurant'
setwd("~/Documents/gits/riddlet.github.io/_drafts/_knitr")
menus<-readLines('../Data/menustat-546cf6b433804.csv')
menus<-menus[-1]
menus<-gsub('\t-', '', menus)
menus<-gsub('\t', '', menus)
menus<-read.csv(textConnection(menus)) #this takes a minute...
submenus<-menus[,3:51] #leave 'Restuarant', 'Food Category', and 'Menu Item ID' untouched.
submenus[]<-lapply(submenus, as.character)
menus[,3:51]<-submenus
submenus<-menus[,c(7:15, 19:51)]
submenus[]<-lapply(submenus, as.numeric)
menus[,c(7:15, 19:51)]<-submenus
library(reshape2)
library(stringr)
library(plyr)
df <- melt(menus, id.vars = c('Restaurant.', 'Food.Category.', 'Item_Name.',
'Menu_Item_ID'))
df$year <- df$variable
levels(df$year) <- str_match(levels(df$variable), "[0-9]{4}")
levels(df$variable) <- gsub('\\.{1,2}', '', levels(df$variable))#remove dots
levels(df$variable) <- gsub('[0-9]', '', levels(df$variable))#remove year
levels(df$variable) <- gsub('\\s+$', '', levels(df$variable))#remove trailing space
df<-dcast(df, Restaurant. + Food.Category. + Item_Name. + Menu_Item_ID + year ~
variable , value.var = 'value')
df<-arrange(df, Restaurant., Item_Name.)
df$Carbohydratesg[131161] <- NA
df[75620, 16] <- 300
df[75620, 21] <- 3
df[75815, 16] <- 250
df[75815, 21] <- 3
df[122305,12] <- NA
df[122305,11] <- NA
df$Calories <- as.numeric(df$Calories)
df$Proteing <- as.numeric(df$Proteing)
df$TotalFatg <- as.numeric(df$TotalFatg)
df$Carbohydratesg <- as.numeric(df$Carbohydratesg)
library(lme4)
names(df)[1] <- 'Restaurant'
m.1 <- lmer(Calories ~ Proteing + Carbohydratesg + TotalFatg +
(1+Proteing+Carbohydratesg+TotalFatg|Restaurant), data=df)
summary(m.1)
rf <- ranef(m.1)
df.rf <- rf$Restaurant
head(df.rf)
df.rf$Proteing <- scale(df.rf$Proteing)
df.rf$Proteing <- df.rf$Proteing*-1
df.rf$Carbohydratesg <- scale(df.rf$Carbohydratesg)
df.rf$TotalFatg <- scale(df.rf$TotalFatg)
library(ggplot2)
df.rf$reporting.tendency <- df.rf$Proteing + df.rf$Carbohydratesg +
df.rf$TotalFatg
ggplot(df.rf, aes(x=reporting.tendency)) +
geom_histogram(binwidth=.2, fill='#144256') +
theme_bw() + ylab('Count') + xlab('Reporting Tendency')
df.rf[which(df.rf$reporting.tendency < -10), ]
df.pizza <- rbind(df[which(df$Restaurant == "Godfather's Pizza"),],
df[which(df$Restaurant == "Round Table Pizza"),])
ggplot(df.pizza, aes(x=Carbohydratesg, y=Calories)) +
geom_point(color='#88301B') + facet_wrap(~Restaurant) +
theme_bw()
ggplot(df.pizza, aes(x=TotalFatg, y=Calories)) +
geom_point(color='#88301B') + facet_wrap(~Restaurant) +
theme_bw()
ggplot(df.pizza, aes(x=Proteing, y=Calories)) +
geom_point(color='#88301B') + facet_wrap(~Restaurant) +
theme_bw()
df.pizza$line <- 5*df.pizza$Carbohydratesg
ggplot(df.pizza, aes(x=Carbohydratesg, y=Calories)) +
geom_point(color='#88301B') + facet_wrap(~Restaurant) +
geom_line(aes(x=Carbohydratesg, y=line), color='#144256')+
theme_bw()
df.pizza[which(df.pizza$Calories < df.pizza$line),c(1, 3, 11, 12, 18, 21)]
df$Carbohydratesg>125
table(df$Carbohydratesg>125)
table(df$Carbohydratesg>125 && df$Calories<375)
df[which(df$Carbohydratesg>125 && df$Restaurant == "Round Table Pizza"),]
df %>%
filter(Carbohydratesg>125) %>%
filter(Restaurant == "Round Table Pizza")
library(dplyr)
df %>%
filter(Carbohydratesg>125) %>%
filter(Restaurant == "Round Table Pizza")
df.pizza$Restaurant
levels(df.pizza$Restaurant)
df %>%
filter(TotalFatg>125) %>%
filter(Restaurant == "Round Table Pizza")
table(df$TotalFatg>125 && df$Calories<375)
df[which(df$TotalFatg>125 && df$Restaurant == "Round Table Pizza"),]
df %>%
filter(Carbohydratesg>150) %>%
filter(Restaurant == "Godfather's Pizza")
df$Menu_Item_ID == 43760
df[which(df$Menu_Item_ID == 43760),]
df[which(df$Menu_Item_ID == 72354),]
df %>%
filter(TotalFatg>125) %>%
filter(Restaurant == "Round Table Pizza")
df$Carbohydratesg[which(df$Menu_Item_ID == 43760)]
df$TotalFatg[which(df$Menu_Item_ID == 72354)]
df$Carbohydratesg[which(df$Menu_Item_ID == 43760)] <- NA
df$TotalFatg[which(df$Menu_Item_ID == 72354)] <- NA
m.2 <- lmer(Calories ~ Proteing + Carbohydratesg + TotalFatg +
(1+Proteing+Carbohydratesg+TotalFatg|Restaurant), data=df)
summary(m.2)
summary(m.1)
rf <- ranef(m.2)
df.rf <- rf$Restaurant
head(df.rf)
df.rf$Proteing <- scale(df.rf$Proteing)
df.rf$Proteing <- df.rf$Proteing*-1
df.rf$Carbohydratesg <- scale(df.rf$Carbohydratesg)
df.rf$TotalFatg <- scale(df.rf$TotalFatg)
library(ggplot2)
df.rf$reporting.tendency <- df.rf$Proteing + df.rf$Carbohydratesg +
df.rf$TotalFatg
ggplot(df.rf, aes(x=reporting.tendency)) +
geom_histogram(binwidth=.2, fill='#144256') +
theme_bw() + ylab('Count') + xlab('Reporting Tendency')
df.rf$reporting.tendency
df.rf[22,]
df.pizza[sample(which(df.pizza$Calories < df.pizza$line), 20),c(1, 3, 11, 12, 18, 21)]
input <- commandArgs(trailingOnly = TRUE)
KnitPost <- function(input, base.url = "/") {
require(knitr)
opts_knit$set(base.url = base.url)
fig.path <- paste0("../figs/", sub(".Rmd$", "", basename(input)), "/")
opts_chunk$set(fig.path = fig.path)
opts_chunk$set(fig.cap = "center")
render_jekyll()
print(paste0("../_posts/", sub(".Rmd$", "", basename(input)), ".md"))
knit(input, output = paste0("../_posts/", sub(".Rmd$", "", basename(input)), ".md"), envir = parent.frame())
}
KnitPost(input)
KnitPost('nutrition.2.Rmd')
